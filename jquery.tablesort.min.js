/*
	A simple, lightweight jQuery plugin for creating sortable tables.
	https://github.com/kylefox/jquery-tablesort
	Version 0.0.4
*/
$(function(){var a=window.Zepto||window.jQuery;a.tablesort=function(b,c){var d=this;this.$table=b,this.$thead=this.$table.find("thead"),this.settings=a.extend({},a.tablesort.defaults,c),this.$table.find("th:not(.no-sort)").bind("click.tablesort",function(){d.sort(a(this))}),this.index=null,this.$th=null,this.direction=null},a.tablesort.prototype={sort:function(b,c){var d=new Date,e=this,f=this.$table,g=f.find("tbody").length>0?f.find("tbody"):f,h=this.$thead.length>0?f.find("tbody tr"):f.find("tr").has("td"),i=f.find("tr td:nth-of-type("+(b.index()+1)+")"),j=b.data().sortBy,k=[],l=i.map(function(c,d){return j?"function"==typeof j?j(a(b),a(d),e):j:null!=a(this).data().sortValue?a(this).data().sortValue:a(this).text()});if(0!==l.length){e.$table.find("th").removeClass(e.settings.asc+" "+e.settings.desc),"asc"!==c&&"desc"!==c?this.direction="asc"===this.direction?"desc":"asc":this.direction=c,c="asc"==this.direction?1:-1,e.$table.trigger("tablesort:start",[e]),e.log("Sorting by "+this.index+" "+this.direction);for(var m=0,n=l.length;n>m;m++)k.push({index:m,cell:i[m],row:h[m],value:l[m]});k.sort(function(a,b){return a.value>b.value?1*c:a.value<b.value?-1*c:0}),a.each(k,function(a,b){g.append(b.row)}),b.addClass(e.settings[e.direction]),e.log("Sort finished in "+((new Date).getTime()-d.getTime())+"ms"),e.$table.trigger("tablesort:complete",[e])}},log:function(b){(a.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+b)},destroy:function(){return this.$table.find("th").unbind("click.tablesort"),this.$table.data("tablesort",null),null}},a.tablesort.DEBUG=!1,a.tablesort.defaults={debug:a.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending"},a.fn.tablesort=function(b){var c,e;return this.each(function(){c=a(this),e=c.data("tablesort"),e&&e.destroy(),c.data("tablesort",new a.tablesort(c,b))})}});
